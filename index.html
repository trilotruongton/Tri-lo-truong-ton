<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tri L·ªô Tr∆∞·ªùng T·ªìn - S√°ch</title>
  <style>
    body { font-family: Arial, sans-serif; margin:0; padding:0; background:#f7f7f7; }
    header { background:#222; color:#fff; padding:15px; text-align:center; font-size:18px; }
    .sale-banner { background:#ff4444; color:#fff; text-align:center; padding:10px; font-size:20px; font-weight:bold; }
    .book-list { display:flex; flex-wrap:wrap; justify-content:center; margin:20px; }
    .book { background:#fff; border-radius:8px; margin:10px; padding:15px; width:220px; box-shadow:0 2px 5px rgba(0,0,0,0.1); text-align:center; }
    .book img { width:100%; height:280px; object-fit:cover; border-radius:6px; }
    .price { margin:10px 0; }
    .old-price { text-decoration: line-through; color:#888; margin-right:5px; }
    .new-price { color:#e60000; font-weight:bold; }
    .btn { background:#007bff; color:#fff; padding:8px 12px; border:none; border-radius:4px; cursor:pointer; margin:5px 0; }
    .btn:hover { background:#0056b3; }
    #cartBtn { position:fixed; top:10px; right:10px; background:#28a745; padding:10px 15px; border-radius:4px; cursor:pointer; }
    #cartBtn span { font-weight:bold; }
    #cartPopup { display:none; position:fixed; top:0; right:0; width:320px; height:100%; background:#fff; box-shadow:-2px 0 6px rgba(0,0,0,0.3); padding:15px; overflow-y:auto; z-index:1000; }
    #cartPopup h3 { margin-top:0; }
    #cartPopup img { width:50px; height:65px; object-fit:cover; margin-right:10px; border-radius:4px; }
    .cart-item { display:flex; align-items:center; margin-bottom:10px; }
    .cart-summary { margin-top:15px; border-top:1px solid #ccc; padding-top:10px; }
    .close { position:absolute; top:10px; right:10px; cursor:pointer; font-weight:bold; font-size:18px; }
    /* Modal ƒë·ªçc th·ª≠ */
    #previewModal { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.7); z-index:2000; }
    #previewContent { position:relative; background:#fff; width:90%; height:90%; margin:20px auto; border-radius:8px; overflow:hidden; }
    #previewContent iframe { width:100%; height:100%; border:none; }
    #closePreview { position:absolute; top:8px; right:12px; font-size:20px; font-weight:bold; color:#333; cursor:pointer; }
  </style>
</head>
<body>

<header>üìö Tri L·ªô Tr∆∞·ªùng T·ªìn - S√°ch ƒë·∫∑c bi·ªát</header>
<div class="sale-banner">üî• Gi·∫£m gi√° s·ªëc 70% cho t·∫•t c·∫£ c√°c s√°ch! üî•</div>

<div id="cartBtn">üõí Gi·ªè h√†ng (<span id="cartCount">0</span>)</div>

<div class="book-list" id="bookList"></div>

<!-- Popup gi·ªè h√†ng -->
<div id="cartPopup">
  <span class="close" onclick="toggleCart()">√ó</span>
  <h3>Gi·ªè h√†ng</h3>
  <div id="cartItems"></div>
  <div class="cart-summary">
    <div>T·ªïng: <strong id="cartTotal">0‚Ç´</strong></div>
    <button id="checkoutBtn" class="btn">ƒê·∫∑t mua</button>
  </div>
</div>

<!-- Modal ƒë·ªçc th·ª≠ -->
<div id="previewModal">
  <div id="previewContent">
    <span id="closePreview">√ó</span>
    <iframe id="previewFrame"></iframe>
  </div>
</div>

<script>
const books = [
  { title: "Tuy·ªát m·∫≠t nh√¢n t√≠nh", image: "images/tuyet-mat-nhan-tinh.jpg", oldPrice: 299000, price: 99000, preview: "trilotruongton/previews/tuyet-mat-nhan-tinh-doc-thu.pdf" },
  { title: "Nh√¢n t√≠nh ƒëen tr·∫Øng", image: "images/nhan-tinh-den-trang.jpg", oldPrice: 2500000, price: 120000, preview: "trilotruongton/previews/nhan-tinh-den-trang-doc-thu.pdf" },
  { title: "Logic ng∆∞·ªùi ngh√®o", image: "images/logic-nguoi-ngheo.jpg", oldPrice: 199000, price: 50000, preview: "trilotruongton/previews/logic-nguoi-ngheo-doc-thu.pdf" },
  { title: "Ki·∫øm ƒë·∫°i", image: "images/kiem-dai.jpg", oldPrice: 599000, price: 129000, preview: "trilotruongton/previews/kiem-dai-doc-thu.pdf" },
  { title: "Thi√™n c∆° 38 c·ª•c", image: "images/thien-co-38-cuc.jpg", oldPrice: 2500000, price: 150000, preview: "trilotruongton/previews/thien-co-38-cuc-doc-thu.pdf" },
  { title: "T∆∞ duy s√¢u s·∫Øc", image: "images/tu-duy-sau-sac.jpg", oldPrice: 2500000, price: 120000, preview: "trilotruongton/previews/tu-duy-sau-sac-doc-thu.pdf" }
];

let cart = [];

function renderBooks() {
  const bookList = document.getElementById("bookList");
  bookList.innerHTML = "";
  books.forEach((book, index) => {
    const div = document.createElement("div");
    div.className = "book";
    div.innerHTML = `
      <img src="${book.image}" alt="${book.title}">
      <h4>${book.title}</h4>
      <div class="price"><span class="old-price">${book.oldPrice.toLocaleString()}‚Ç´</span> <span class="new-price">${book.price.toLocaleString()}‚Ç´</span></div>
      <button class="btn" onclick="addToCart(${index})">Th√™m v√†o gi·ªè</button>
      ${book.preview ? `<button class="btn" onclick="openPreview('${book.preview}')">ƒê·ªçc th·ª≠</button>` : ""}
    `;
    bookList.appendChild(div);
  });
}

function addToCart(index) {
  const book = books[index];
  const item = cart.find(i => i.title === book.title);
  if (item) { item.qty++; } else { cart.push({ ...book, qty: 1 }); }
  updateCart();
}

function updateCart() {
  const cartItems = document.getElementById("cartItems");
  cartItems.innerHTML = "";
  let total = 0;
  cart.forEach(item => {
    total += item.price * item.qty;
    const div = document.createElement("div");
    div.className = "cart-item";
    div.innerHTML = `<img src="${item.image}"><div>${item.title} x${item.qty} - ${item.price.toLocaleString()}‚Ç´</div>`;
    cartItems.appendChild(div);
  });
  document.getElementById("cartCount").innerText = cart.reduce((a, b) => a + b.qty, 0);
  document.getElementById("cartTotal").innerText = total.toLocaleString() + "‚Ç´";
}

function toggleCart() {
  const popup = document.getElementById("cartPopup");
  popup.style.display = popup.style.display === "block" ? "none" : "block";
}

function openPreview(file) {
  document.getElementById("previewFrame").src = file;
  document.getElementById("previewModal").style.display = "block";
}

document.getElementById("closePreview").onclick = function() {
  document.getElementById("previewModal").style.display = "none";
  document.getElementById("previewFrame").src = "";
};

renderBooks();
</script>
</body>
</html>
