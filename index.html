<!doctype html>
<html lang="vi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>TrÃ­ Lá»™ TrÆ°á»ng Tá»“n â€” Cá»­a hÃ ng Ebook</title>
<link rel="stylesheet" href="styles.css">
</head>
<body>
<header class="site-header">
  <div class="container header-inner">
    <div class="brand">
      <img src="images/qr-code.jpg" alt="QR Code" class="qr">
      <h1>TrÃ­ Lá»™ TrÆ°á»ng Tá»“n</h1>
    </div>
    <nav class="main-nav">
      <a href="index.html">Trang chá»§</a>
      <a href="mailto:vang11112006@gmail.com" target="_blank" rel="noopener">LiÃªn há»‡</a>
      <button id="cartBtn" class="cart-btn">Giá» (<span id="cart-count">0</span>)</button>
    </nav>
  </div>
</header>

<section class="intro container">
<p class="lead">Nhá»¯ng gÃ¬ lan truyá»n trÃªn Internet chá»‰ lÃ  má»™t háº¡t bá»¥i nhá» trÃªn Ä‘á»‰nh táº£ng bÄƒng chÃ¬m. Náº¿u khÃ´ng cÃ³ Ã½ thá»©c tÃ¬m tÃ²i, má»™t ngÆ°á»i cÃ³ thá»ƒ sá»‘ng cáº£ Ä‘á»i mÃ  cháº³ng bao giá» cháº¡m Ä‘áº¿n nhá»¯ng táº§ng tri thá»©c sÃ¢u sáº¯c vÃ  khÃ¡c biá»‡t.
<br><br>
Nhá»¯ng tÆ° tÆ°á»Ÿng tinh hoa, kiáº¿n thá»©c uyÃªn thÃ¢m, tÆ° duy Ä‘á»‰nh cao cÃ¹ng nhá»¯ng bÃ­ áº©n cá»• xÆ°a khÃ´ng bao giá» dá»… dÃ ng lá»™ diá»‡n. ChÃºng áº©n mÃ¬nh trong nhá»¯ng â€œhá»™i nhÃ³m kÃ­nâ€, xa rá»i Ã¡nh nhÃ¬n cá»§a sá»‘ Ä‘Ã´ng vÃ  cÃ ng khÃ´ng xuáº¥t hiá»‡n trÃªn cÃ¡c ná»n táº£ng Ä‘áº¡i chÃºng.
<br><br>
XÃ£ há»™i giá»‘ng nhÆ° má»™t Ma Tráº­n Ä‘Ã£ Ä‘Æ°á»£c láº­p trÃ¬nh sáºµn â€“ báº¡n sáº½ chá»n viÃªn thuá»‘c Ä‘á» Ä‘á»ƒ thá»©c tá»‰nh, hay viÃªn thuá»‘c xanh Ä‘á»ƒ tiáº¿p tá»¥c giáº¥c má»™ng? Má»—i ngÆ°á»i Ä‘á»u cÃ³ má»™t lá»±a chá»n, tháº­m chÃ­ cÃ³ nhá»¯ng ngÆ°á»i cÃ²n khÃ´ng Ä‘Æ°á»£c phÃ©p chá»n.
<br><br>
Váº­y nÃªn, viá»‡c báº¡n vÃ  tÃ´i gáº·p nhau hÃ´m nay cÃ³ láº½ khÃ´ng pháº£i ngáº«u nhiÃªn. TÃ´i tin ráº±ng, chÃºt â€œÄáº§u tÆ° kiáº¿n thá»©câ€ báº¡n trao Ä‘i hÃ´m nay sáº½ trá»Ÿ thÃ nh háº¡t giá»‘ng, náº£y ná»Ÿ thÃ nh giÃ¡ trá»‹ gáº¥p trÄƒm, gáº¥p ngÃ n láº§n trong tÆ°Æ¡ng lai!</p>
</section>

<!-- Popup promotion -->
<div id="promo" class="promo">
  <div class="promo-inner">
    <button id="promoClose" class="promo-close">&times;</button>
    <h2>Giáº£m 70% trong vÃ²ng 3 thÃ¡ng Ä‘áº§u vá»«a táº¡o shop!</h2>
    <p>Æ¯u Ä‘Ã£i Ä‘áº·c biá»‡t cho khÃ¡ch hÃ ng Ä‘áº§u tiÃªn â€” Ã¡p dá»¥ng cho nhiá»u Ä‘áº§u sÃ¡ch.</p>
    <button id="promoShop" class="btn primary">Mua ngay</button>
  </div>
</div>

<main class="container">
  <section class="books-grid" id="booksGrid">
    <!-- Book items inserted by JS -->
  </section>
</main>

<!-- Cart modal -->
<div id="cartModal" class="modal">
  <div class="modal-content">
    <button class="modal-close" id="closeCart">&times;</button>
    <h3>Giá» hÃ ng</h3>
    <div id="cartItems"></div>
    <div class="cart-summary">
      <div>Tá»•ng: <strong id="cartTotal">0â‚«</strong></div>
      <button id="checkoutBtn" class="btn primary">Äáº·t mua</button>
    </div>
  </div>
</div>

<!-- Checkout modal / form -->
<div id="checkoutModal" class="modal">
  <div class="modal-content">
    <button class="modal-close" id="closeCheckout">&times;</button>
    <h3>Form Ä‘áº·t hÃ ng</h3>
    <!-- Replace the action in the form below with your Formspree form endpoint.
         To get the endpoint: sign up on https://formspree.io, create a form and copy the POST URL like:
         https://formspree.io/f/your_form_id  -->
    <form action="https://formsubmit.co/vang11112006@gmail.com" method="POST">
  <label for="name">Há» vÃ  tÃªn:</label><br>
  <input type="text" id="name" name="name" required><br><br>

  <label for="email">Email:</label><br>
  <input type="email" id="email" name="email" required><br><br>

  <label for="phone">Sá»‘ Ä‘iá»‡n thoáº¡i:</label><br>
  <input type="tel" id="phone" name="phone" required><br><br>

  <label for="product">Sáº£n pháº©m Ä‘áº·t hÃ ng:</label><br>
  <select id="product" name="product" required>
    <option value="">--Chá»n sáº£n pháº©m--</option>
    <option value="sachtuyetmatnhantinh">SÃ¡ch tuyá»‡t máº­t nhÃ¢n tÃ­nh</option>
    <option value="sachnhantinhdentrang">SÃ¡ch nhÃ¢n tÃ­nh Ä‘en tráº¯ng</option>
    <option value="sachthienco38cuc">SÃ¡ch thiÃªn cÆ¡ 38 cá»¥c</option>
    <option value="sachnhantinhxagiao">SÃ¡ch nhÃ¢n tÃ­nh xÃ£ giao</option>
    <option value="sachlogicnguoingheo">SÃ¡ch logic ngÆ°á»i nghÃ¨o</option>
    <option value="sachtuduysausac">SÃ¡ch tÆ° duy sÃ¢u sáº¯c</option>
    <option value="sachkiendai">SÃ¡ch kiáº¿m Ä‘áº¡i</option>
    option>
  </select><br><br>

  <label for="quantity">Sá»‘ lÆ°á»£ng:</label><br>
  <input type="number" id="quantity" name="quantity" min="1" value="1" required><br><br>

  <!-- Redirect sau khi gá»­i -->
  <input type="hidden" name="_next" value="https://trilotruongton.github.io/Tri-lo-truong-ton/thank-you.html">

  <!-- Báº­t Captcha chá»‘ng spam -->
  <input type="hidden" name="_captcha" value="true">

  <button type="submit">Äáº·t hÃ ng</button>
</form>
<p class="small">Láº§n Ä‘áº§u gá»­i form, báº¡n sáº½ nháº­n email xÃ¡c nháº­n Ä‘á»ƒ kÃ­ch hoáº¡t nháº­n Ä‘Æ¡n.</p>
      <input type="hidden" name="order_details" id="order_details">
      <label>Há» vÃ  tÃªn<br><input name="name" required></label><br>
      <label>Email<br><input name="email" type="email" required></label><br>
      <label>Äiá»‡n thoáº¡i<br><input name="phone" required></label><br>
      <label>Ghi chÃº<br><textarea name="note"></textarea></label><br>
      <div style="margin-top:12px;">
        <button type="submit" class="btn primary">Gá»­i Ä‘Æ¡n</button>
        <button type="button" id="cancelOrder" class="btn secondary">Huá»·</button>
      </div>
    </form>
    <h2>Chá»n sÃ¡ch Ä‘á»ƒ thÃªm vÃ o giá» hÃ ng</h2>

<form id="cartForm">
  <label for="bookSelect">Chá»n sÃ¡ch:</label>
  <select id="bookSelect" name="bookSelect" required>
    <option value="">-- Chá»n má»™t cuá»‘n sÃ¡ch --</option>
    <option value="tuyet-mat-nhan-tinh">Tuyá»‡t Máº­t NhÃ¢n TÃ­nh</option>
    <option value="nhan-tinh-den-trang">NhÃ¢n TÃ­nh Äen Tráº¯ng</option>
    <option value="kiem-dai">Kiáº¿m Äáº¡i</option>
    <option value="nhan-tinh-xa-giao">NhÃ¢n TÃ­nh XÃ£ Giao</option>
    <option value="thien-co-38-cuc">ThiÃªn CÆ¡ 38 Cá»¥c</option>
    <option value="logic-nguoi-ngheo">Logic NgÆ°á»i NghÃ¨o</option>
    <option value="tu-duy-sau-sac">TÆ° Duy SÃ¢u Sáº¯c</option>
  </select>

  <label for="quantity">Sá»‘ lÆ°á»£ng:</label>
  <input type="number" id="quantity" name="quantity" min="1" value="1" required />

  <button type="submit">ThÃªm vÃ o giá» hÃ ng</button>
</form>

<h3>Giá» hÃ ng cá»§a báº¡n:</h3>
<ul id="cartList">
  <!-- Sáº£n pháº©m thÃªm vÃ o sáº½ hiá»‡n á»Ÿ Ä‘Ã¢y -->
</ul>

<script>
  const cartForm = document.getElementById('cartForm');
  const cartList = document.getElementById('cartList');

  // TÃªn sÃ¡ch Ä‘á»ƒ hiá»ƒn thá»‹ theo value
  const bookNames = {
    "tuyet-mat-nhan-tinh": "Tuyá»‡t Máº­t NhÃ¢n TÃ­nh",
    "nhan-tinh-den-trang": "NhÃ¢n TÃ­nh Äen Tráº¯ng",
    "kiem-dai": "Kiáº¿m Äáº¡i",
    "nhan-tinh-xa-giao": "NhÃ¢n TÃ­nh XÃ£ Giao",
    "thien-co-38-cuc": "ThiÃªn CÆ¡ 38 Cá»¥c",
    "logic-nguoi-ngheo": "Logic NgÆ°á»i NghÃ¨o",
    "tu-duy-sau-sac": "TÆ° Duy SÃ¢u Sáº¯c"
  };

  // Máº£ng lÆ°u sáº£n pháº©m trong giá»
  let cart = [];

  cartForm.addEventListener('submit', function(e) {
    e.preventDefault();

    const bookValue = this.bookSelect.value;
    const quantity = parseInt(this.quantity.value);

    if(!bookValue) {
      alert('Vui lÃ²ng chá»n má»™t cuá»‘n sÃ¡ch');
      return;
    }
    if(quantity < 1) {
      alert('Sá»‘ lÆ°á»£ng pháº£i lá»›n hÆ¡n hoáº·c báº±ng 1');
      return;
    }

    // Kiá»ƒm tra xem sÃ¡ch Ä‘Ã£ cÃ³ trong giá» chÆ°a
    const existing = cart.find(item => item.book === bookValue);
    if(existing) {
      existing.quantity += quantity;
    } else {
      cart.push({ book: bookValue, quantity: quantity });
    }

    renderCart();
    this.reset();
  });

  function renderCart() {
    cartList.innerHTML = '';

    cart.forEach(item => {
      const li = document.createElement('li');
      li.textContent = `${bookNames[item.book]} - Sá»‘ lÆ°á»£ng: ${item.quantity}`;
      cartList.appendChild(li);
    });
  }
</script>
    <p class="small">Khi gá»­i láº§n Ä‘áº§u Formspree sáº½ yÃªu cáº§u báº¡n xÃ¡c nháº­n email Ä‘á»ƒ nháº­n Ä‘Æ¡n.</p>
  </div>
</div>

<footer class="site-footer">
  <div class="container">
    <p>Â© 2025 TrÃ­ Lá»™ TrÆ°á»ng Tá»“n â€” LiÃªn há»‡: <a href="mailto:vang11112006@gmail.com">vang11112006@gmail.com</a></p>
  </div>
</footer>

<script>
// Data for 7 books
const books = [
  {
    id: "b1",
    title: "Tuyá»‡t Máº­t NhÃ¢n TÃ­nh",
    author: "XuyÃªn Tháº¥u NhÃ¢n TÃ­nh",
    priceOrig: 399000,
    price: 0,
    note: "ğŸ SÃ¡ch táº·ng",
    img: "images/tuyet-mat-nhan-tinh.jpg"
  },
  {
    id: "b2",
    title: "ThiÃªn CÆ¡ 38 Cá»¥c",
    author: "XuyÃªn Tháº¥u NhÃ¢n TÃ­nh",
    priceOrig: 560000,
    price: 170000,
    img: "images/thien-co-38-cuc.jpg"
  },
  {
    id: "b3",
    title: "TÆ° Duy SÃ¢u Sáº¯c",
    author: "XuyÃªn Tháº¥u NhÃ¢n TÃ­nh",
    priceOrig: 560000,
    price: 150000,
    img: "images/tu-duy-sau-sac.jpg"
  },
  {
    id: "b4",
    title: "Logic NgÆ°á»i NghÃ¨o",
    author: "XuyÃªn Tháº¥u NhÃ¢n TÃ­nh",
    priceOrig: 560000,
    price: 170000,
    img: "images/logic-nguoi-ngheo.jpg"
  },
  {
    id: "b5",
    title: "NhÃ¢n TÃ­nh Äen Tráº¯ng",
    author: "XuyÃªn Tháº¥u NhÃ¢n TÃ­nh",
    priceOrig: 350000,
    price: 90000,
    img: "images/nhan-tinh-den-trang.jpg"
  },
  {
    id: "b6",
    title: "Kiáº¿m Äáº¡i",
    author: "XuyÃªn Tháº¥u NhÃ¢n TÃ­nh",
    priceOrig: 250000,
    price: 90000,
    img: "images/kiem-dai.jpg"
  },
  {
    id: "b7",
    title: "NhÃ¢n TÃ­nh XÃ£ Giao â€“ TÆ° Duy Thá»§ SÃ¡ch",
    author: "XuyÃªn Tháº¥u NhÃ¢n TÃ­nh",
    priceOrig: 560000,
    price: 110000,
    img: "images/nhan-tinh-xa-giao.jpg"
  }
];

// Utilities
function formatVND(n){ if(n===0) return "Miá»…n phÃ­"; return n.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".") + "â‚«"; }

// Render books
const grid = document.getElementById('booksGrid');
books.forEach(b=>{
  const div = document.createElement('div');
  div.className = 'card';
  div.innerHTML = `
    <div class="card-thumb" style="background-image:url('${b.img}')"></div>
    <div class="card-body">
      <h3>${b.title}</h3>
      <p class="meta">TÃ¡c giáº£: ${b.author}</p>
      <p class="price-row">
        <span class="old">${formatVND(b.priceOrig)}</span>
        <span class="new">${b.price===0? (b.note||'Miá»…n phÃ­') : formatVND(b.price)}</span>
      </p>
      <div class="card-actions">
        <button class="btn add-to-cart" data-id="${b.id}">ThÃªm vÃ o giá»</button>
        <button class="btn secondary view-detail" data-id="${b.id}">Xem</button>
      </div>
    </div>
  `;
  grid.appendChild(div);
});

// Cart (LocalStorage)
const CART_KEY = 'trilot_cart_v1';
function loadCart(){ try{ return JSON.parse(localStorage.getItem(CART_KEY))||[] }catch(e){return[]} }
function saveCart(c){ localStorage.setItem(CART_KEY, JSON.stringify(c)); updateCartCount(); }
function updateCartCount(){ const c = loadCart(); document.getElementById('cart-count').textContent = c.reduce((s,i)=>s+i.qty,0); }
function addToCart(id){ const c = loadCart(); const item = c.find(x=>x.id===id); if(item) item.qty++; else c.push({id, qty:1}); saveCart(c); alert('ÄÃ£ thÃªm vÃ o giá»'); }
document.addEventListener('click', e=>{
  if(e.target.matches('.add-to-cart')){ addToCart(e.target.dataset.id); }
});

// Show cart modal
const cartBtn = document.getElementById('cartBtn');
const cartModal = document.getElementById('cartModal');
const checkoutModal = document.getElementById('checkoutModal');
cartBtn.addEventListener('click', ()=>{ renderCartItems(); cartModal.style.display='block'; });
document.getElementById('closeCart').addEventListener('click', ()=> cartModal.style.display='none');

function renderCartItems(){
  const container = document.getElementById('cartItems');
  const c = loadCart();
  if(c.length===0){ container.innerHTML = '<p>Giá» hÃ ng trá»‘ng</p>'; document.getElementById('cartTotal').textContent='0â‚«'; return; }
  let html='';
  let total=0;
  c.forEach(ci=>{
    const book = books.find(b=>b.id===ci.id);
    const price = book.price || 0;
    const line = price * ci.qty;
    total += line;
    html += `<div class="cart-row"><div class="cart-row-left"><img src="${book.img}" alt="${book.title}"></div>
             <div class="cart-row-right"><strong>${book.title}</strong><br>SL: ${ci.qty} â€” ${formatVND(price)}<br><button class="btn small dec" data-id="${ci.id}">-</button> <button class="btn small inc" data-id="${ci.id}">+</button> <button class="btn small danger remove" data-id="${ci.id}">XÃ³a</button></div></div>`;
  });
  container.innerHTML = html;
  document.getElementById('cartTotal').textContent = formatVND(total);
}

// cart item buttons
document.addEventListener('click', e=>{
  if(e.target.matches('.inc')){ changeQty(e.target.dataset.id, 1); renderCartItems(); saveCart(loadCart()); }
  if(e.target.matches('.dec')){ changeQty(e.target.dataset.id, -1); renderCartItems(); saveCart(loadCart()); }
  if(e.target.matches('.remove')){ removeItem(e.target.dataset.id); renderCartItems(); saveCart(loadCart()); }
});

function changeQty(id, delta){
  const c = loadCart(); const it = c.find(x=>x.id===id); if(!it) return; it.qty += delta; if(it.qty<1) it.qty=1; saveCart(c);
}
function removeItem(id){ let c = loadCart(); c = c.filter(x=>x.id!==id); saveCart(c); renderCartItems(); }

// Checkout flow
document.getElementById('checkoutBtn').addEventListener('click', ()=>{
  const c = loadCart(); if(c.length===0){ alert('Giá» hÃ ng trá»‘ng'); return; }
  // prepare order details text
  let lines = [];
  let total=0;
  c.forEach(ci=>{ const b = books.find(x=>x.id===ci.id); const p = b.price||0; lines.push(`${b.title} x${ci.qty} â€” ${formatVND(p)}`); total += p*ci.qty; });
  lines.push('Tá»•ng: ' + formatVND(total));
  document.getElementById('order_details').value = lines.join('\n');
  cartModal.style.display='none'; checkoutModal.style.display='block';
});
document.getElementById('closeCheckout').addEventListener('click', ()=> checkoutModal.style.display='none');
document.getElementById('cancelOrder').addEventListener('click', ()=> checkoutModal.style.display='none');

// Submit form - uses Formspree action attribute. No extra code needed; but we can show a message.
document.getElementById('orderForm').addEventListener('submit', function(e){
  // form will POST to Formspree; allow default behaviour.
  // Optionally, clear cart after submit:
  localStorage.removeItem(CART_KEY);
  setTimeout(()=>{ alert('ÄÆ¡n Ä‘áº·t Ä‘Ã£ gá»­i. Vui lÃ²ng kiá»ƒm tra email Ä‘á»ƒ xÃ¡c nháº­n Formspree.'); updateCartCount(); }, 1000);
});

// Promo popup logic (show once per browser)
const promo = document.getElementById('promo');
const promoClose = document.getElementById('promoClose');
const promoShop = document.getElementById('promoShop');
if(!localStorage.getItem('promo_seen')){ promo.style.display='flex'; localStorage.setItem('promo_seen','1'); }
promoClose.addEventListener('click', ()=> promo.style.display='none');
promoShop.addEventListener('click', ()=>{ promo.style.display='none'; document.getElementById('cartBtn').click(); });

// simple "view" details (alert brief info)
document.addEventListener('click', e=>{
  if(e.target.matches('.view-detail')){
    const id = e.target.dataset.id;
    const b = books.find(x=>x.id===id);
    alert(b.title + '\n\nTÃ¡c giáº£: ' + b.author + '\nGiÃ¡: ' + (b.price===0? 'Miá»…n phÃ­' : formatVND(b.price)));
  }
});

// init
updateCartCount();
</script>
</body>
</html>
