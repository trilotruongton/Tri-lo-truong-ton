<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tri L·ªô Tr∆∞·ªùng T·ªìn - S√°ch</title>
  <style>
    body { font-family: Arial, sans-serif; margin:0; padding:0; background:#f8f8f8; }
    h1 { text-align:center; padding:20px; }
    .grid { display:grid; grid-template-columns: repeat(auto-fit, minmax(200px,1fr)); gap:20px; padding:20px; }
    .book-item { background:#fff; border-radius:8px; padding:12px; box-shadow:0 2px 6px rgba(0,0,0,0.1); text-align:center; }
    .book-item img { width:100%; height:280px; object-fit:cover; border-radius:6px; }
    .book-item h4 { margin:10px 0; font-size:18px; }
    .book-item p { margin:6px 0; }
    .btn { padding:6px 10px; border:none; border-radius:4px; cursor:pointer; }
    .add-to-cart { background:#2196f3; color:#fff; }
    .btn.secondary { background:#555; color:#fff; text-decoration:none; display:inline-block; }
    /* Cart popup */
    #cartPopup { display:none; position:fixed; top:0; right:0; width:320px; height:100%; background:#fff; box-shadow:-2px 0 6px rgba(0,0,0,0.2); z-index:1000; padding:20px; overflow-y:auto; }
    #cartPopup h3 { margin-top:0; }
    #closeCart { position:absolute; top:10px; right:10px; cursor:pointer; font-size:18px; }
    #cartItems img { width:50px; height:65px; object-fit:cover; border-radius:4px; }
    .cart-item { display:flex; align-items:center; gap:10px; margin-bottom:12px; }
    .cart-summary { margin-top:15px; font-size:16px; }
    #cartCount { background:red; color:#fff; border-radius:50%; padding:2px 8px; font-size:12px; margin-left:4px; }
  </style>
</head>
<body>

  <h1>üìö B·ªô S√°ch Tri L·ªô Tr∆∞·ªùng T·ªìn</h1>

  <!-- N√∫t gi·ªè h√†ng -->
  <div style="position:fixed; top:10px; right:10px; cursor:pointer; background:#000; color:#fff; padding:8px 12px; border-radius:6px;" id="cartBtn">
    üõí Gi·ªè h√†ng <span id="cartCount">0</span>
  </div>

  <!-- Danh s√°ch s√°ch -->
  <div class="grid" id="bookGrid"></div>

  <!-- Popup gi·ªè h√†ng -->
  <div id="cartPopup">
    <span id="closeCart">‚úñ</span>
    <h3>Gi·ªè h√†ng</h3>
    <div id="cartItems"></div>
    <div class="cart-summary">
      T·ªïng: <strong id="cartTotal">0‚Ç´</strong>
    </div>
    <button id="checkoutBtn" class="btn add-to-cart" style="margin-top:10px;">ƒê·∫∑t mua</button>
  </div>

<script>
  const books = [
    { id: "b1", title: "Tuy·ªát M·∫≠t Nh√¢n T√≠nh", price: 0, priceOrig: 399000, img: "images/tuyet-mat-nhan-tinh.jpg", preview: "previews/tuyet-mat-nhan-tinh-doc-thu.pdf" },
    { id: "b2", title: "Nh√¢n T√≠nh ƒêen Tr·∫Øng", price: 90000, priceOrig: 350000, img: "images/nhan-tinh-den-trang.jpg", preview: "previews/nhan-tinh-den-trang-doc-thu.pdf" },
    { id: "b3", title: "T∆∞ Duy S√¢u S·∫Øc", price: 150000, priceOrig: 560000, img: "images/tu-duy-sau-sac.jpg", preview: "previews/tu-duy-sau-sac-doc-thu.pdf" },
    { id: "b4", title: "Thi√™n C∆° 38 C·ª•c", price: 170000, priceOrig: 560000, img: "images/thien-co-38-cuc.jpg", preview: "previews/thien-co-38-cuc-doc-thu.pdf" },
    { id: "b5", title: "Ki·∫øm ƒê·∫°i", price: 90000, priceOrig: 250000, img: "images/kiem-dai.jpg" },
    { id: "b6", title: "Logic Ng∆∞·ªùi Ngh√®o", price: 170000, priceOrig: 560000, img: "images/logic-nguoi-ngheo.jpg", preview: "previews/logic-nguoi-ngheo-doc-thu.pdf" }
  ];

  const grid = document.getElementById("bookGrid");
  function formatVND(num) {
    return num.toLocaleString("vi-VN") + "‚Ç´";
  }

  books.forEach(b=>{
    const div = document.createElement('div');
    div.className = 'book-item';
    div.innerHTML = `
      <img src="${b.img}" alt="${b.title}">
      <h4>${b.title}</h4>
      <p><del>${formatVND(b.priceOrig)}</del> <strong>${formatVND(b.price)}</strong></p>
      <div style="display:flex; gap:6px; flex-wrap:wrap; justify-content:center;">
        <button class="add-to-cart" data-id="${b.id}">Th√™m v√†o gi·ªè</button>
        ${b.preview ? `<a href="${b.preview}" target="_blank" class="btn secondary">Xem th·ª≠</a>` : ""}
      </div>
    `;
    grid.appendChild(div);
  });

  // Cart logic
  let cart = {};
  const cartBtn = document.getElementById("cartBtn");
  const cartPopup = document.getElementById("cartPopup");
  const closeCart = document.getElementById("closeCart");
  const cartItems = document.getElementById("cartItems");
  const cartTotal = document.getElementById("cartTotal");
  const cartCount = document.getElementById("cartCount");

  cartBtn.onclick = () => cartPopup.style.display = "block";
  closeCart.onclick = () => cartPopup.style.display = "none";

  function updateCart() {
    cartItems.innerHTML = "";
    let total = 0, count = 0;
    for (let id in cart) {
      const item = books.find(b=>b.id===id);
      const qty = cart[id];
      total += item.price * qty;
      count += qty;
      const row = document.createElement("div");
      row.className = "cart-item";
      row.innerHTML = `
        <img src="${item.img}" alt="${item.title}">
        <div style="flex:1;">
          <strong>${item.title}</strong><br>
          SL: ${qty} √ó ${formatVND(item.price)}
        </div>
      `;
      cartItems.appendChild(row);
    }
    cartTotal.textContent = formatVND(total);
    cartCount.textContent = count;
  }

  document.addEventListener("click", function(e) {
    if (e.target.classList.contains("add-to-cart")) {
      const id = e.target.dataset.id;
      cart[id] = (cart[id]||0)+1;
      updateCart();
    }
  });
</script>
</body>
</html>
