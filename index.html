<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Tri L·ªô Tr∆∞·ªùng T·ªìn - S√°ch</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background: #f8f8f8;
    }
    header {
      background: #d32f2f;
      color: white;
      text-align: center;
      padding: 15px;
      font-size: 20px;
      font-weight: bold;
    }
    .container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 20px;
      padding: 20px;
    }
    .book {
      background: white;
      border-radius: 6px;
      padding: 15px;
      width: 220px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
      text-align: center;
    }
    .book img {
      width: 100%;
      height: 280px;
      object-fit: cover;
      border-radius: 4px;
    }
    .price {
      margin: 10px 0;
    }
    .old-price {
      text-decoration: line-through;
      color: #888;
      font-size: 14px;
    }
    .new-price {
      color: #d32f2f;
      font-size: 18px;
      font-weight: bold;
      margin-left: 5px;
    }
    button {
      margin: 5px;
      padding: 8px 12px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    .btn-cart { background: #1976d2; color: white; }
    .btn-preview { background: #388e3c; color: white; }

    /* Cart popup */
    #cartModal {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.5);
      z-index: 1000;
    }
    #cartContent {
      background: white;
      width: 90%; max-width: 500px;
      margin: 50px auto;
      padding: 20px;
      border-radius: 6px;
      max-height: 80%;
      overflow-y: auto;
    }

    /* Preview modal */
    #previewModal {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.7);
      z-index: 2000;
    }
    #previewContent {
      background: white;
      width: 90%; max-width: 800px;
      margin: 30px auto;
      border-radius: 6px;
      height: 90%;
      display: flex;
      flex-direction: column;
    }
    #previewFrame {
      flex: 1;
      border: none;
      width: 100%;
    }
    .closeBtn {
      background: #d32f2f;
      color: white;
      padding: 5px 10px;
      border: none;
      cursor: pointer;
      align-self: flex-end;
      margin: 5px;
      border-radius: 4px;
    }
  </style>
</head>
<body>
  <header>üî• Gi·∫£m gi√° 70% to√†n b·ªô s√°ch üî•</header>

  <div class="container" id="bookList"></div>

  <!-- Cart Modal -->
  <div id="cartModal">
    <div id="cartContent">
      <h3>Gi·ªè h√†ng</h3>
      <div id="cartItems"></div>
      <div><strong>T·ªïng: </strong><span id="cartTotal">0‚Ç´</span></div>
      <button class="closeBtn" onclick="closeCart()">ƒê√≥ng</button>
    </div>
  </div>

  <!-- Preview Modal -->
  <div id="previewModal">
    <div id="previewContent">
      <button class="closeBtn" onclick="closePreview()">ƒê√≥ng</button>
      <iframe id="previewFrame"></iframe>
    </div>
  </div>

  <script>
    const books = [
      {
        title: "Tuy·ªát m·∫≠t nh√¢n t√≠nh",
        image: "images/tuyet-mat-nhan-tinh.jpg",
        oldPrice: 299000,
        newPrice: 99000
      },
      {
        title: "Nh√¢n t√≠nh ƒëen tr·∫Øng",
        image: "images/nhan-tinh-den-trang.jpg",
        oldPrice: 2500000,
        newPrice: 120000,
        preview: "trilotruongton/previews/nhan-tinh-den-trang-doc-thu.pdf"
      },
      {
        title: "Logic ng∆∞·ªùi ngh√®o",
        image: "images/logic-nguoi-ngheo.jpg",
        oldPrice: 199000,
        newPrice: 50000,
        preview: "trilotruongton/previews/logic-nguoi-ngheo-doc-thu.pdf"
      },
      {
        title: "Ki·∫øm ƒë·∫°i",
        image: "images/kiem-dai.jpg",
        oldPrice: 599000,
        newPrice: 129000
      },
      {
        title: "Thi√™n c∆° 38 c·ª•c",
        image: "images/thien-co-38-cuc.jpg",
        oldPrice: 2500000,
        newPrice: 150000,
        preview: "trilotruongton/previews/thien-co-38-cuc-doc-thu.pdf"
      },
      {
        title: "T∆∞ duy s√¢u s·∫Øc",
        image: "images/tu-duy-sau-sac.jpg",
        oldPrice: 2500000,
        newPrice: 120000,
        preview: "trilotruongton/previews/tu-duy-sau-sac-doc-thu.pdf"
      },
      {
        title: "Xuy√™n th·∫•u nh√¢n t√≠nh",
        image: "images/xuyen-thau-nhan-tinh.jpg",
        oldPrice: 299000,
        newPrice: 99000,
        preview: "trilotruongton/previews/xuyen-thau-nhan-tinh-doc-thu.pdf"
      }
    ];

    const bookList = document.getElementById("bookList");
    const cart = [];
    const cartItems = document.getElementById("cartItems");
    const cartTotal = document.getElementById("cartTotal");

    function renderBooks() {
      bookList.innerHTML = "";
      books.forEach((book, idx) => {
        const div = document.createElement("div");
        div.className = "book";
        div.innerHTML = `
          <img src="${book.image}" alt="${book.title}">
          <h4>${book.title}</h4>
          <div class="price">
            <span class="old-price">${book.oldPrice.toLocaleString()}‚Ç´</span>
            <span class="new-price">${book.newPrice.toLocaleString()}‚Ç´</span>
          </div>
          <button class="btn-cart" onclick="addToCart(${idx})">Th√™m v√†o gi·ªè</button>
          ${book.preview ? `<button class="btn-preview" onclick="openPreview('${book.preview}')">ƒê·ªçc th·ª≠</button>` : ""}
        `;
        bookList.appendChild(div);
      });
    }

    function addToCart(index) {
      const book = books[index];
      cart.push(book);
      renderCart();
      openCart();
    }

    function renderCart() {
      cartItems.innerHTML = "";
      let total = 0;
      cart.forEach((item) => {
        total += item.newPrice;
        const p = document.createElement("p");
        p.textContent = `${item.title} - ${item.newPrice.toLocaleString()}‚Ç´`;
        cartItems.appendChild(p);
      });
      cartTotal.textContent = total.toLocaleString() + "‚Ç´";
    }

    function openCart() { document.getElementById("cartModal").style.display = "block"; }
    function closeCart() { document.getElementById("cartModal").style.display = "none"; }

    function openPreview(file) {
      document.getElementById("previewFrame").src = file;
      document.getElementById("previewModal").style.display = "block";
    }
    function closePreview() {
      document.getElementById("previewFrame").src = "";
      document.getElementById("previewModal").style.display = "none";
    }

    renderBooks();
  </script>
</body>
</html>
